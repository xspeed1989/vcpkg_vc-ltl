diff --git a/ogr/ogrsf_frmts/shape/gdal_shapelib_symbol_rename.h b/ogr/ogrsf_frmts/shape/gdal_shapelib_symbol_rename.h
index 61eb15ee951..79795835713 100644
--- a/ogr/ogrsf_frmts/shape/gdal_shapelib_symbol_rename.h
+++ b/ogr/ogrsf_frmts/shape/gdal_shapelib_symbol_rename.h
@@ -1,3 +1,4 @@
+/* This is a generated file by dump_symbols.h. *DO NOT EDIT MANUALLY !* */
 #define compare_ints gdal_compare_ints
 #define DBFAddField gdal_DBFAddField
 #define DBFAddNativeFieldType gdal_DBFAddNativeFieldType
@@ -13,6 +14,7 @@
 #define DBFGetFieldCount gdal_DBFGetFieldCount
 #define DBFGetFieldIndex gdal_DBFGetFieldIndex
 #define DBFGetFieldInfo gdal_DBFGetFieldInfo
+#define DBFGetLenWithoutExtension gdal_DBFGetLenWithoutExtension
 #define DBFGetNativeFieldType gdal_DBFGetNativeFieldType
 #define DBFGetNullCharacter gdal_DBFGetNullCharacter
 #define DBFGetRecordCount gdal_DBFGetRecordCount
@@ -43,6 +45,7 @@
 #define DBFWriteStringAttribute gdal_DBFWriteStringAttribute
 #define DBFWriteTuple gdal_DBFWriteTuple
 #define frame_dummy gdal_frame_dummy
+#define SASetupDefaultHooks gdal_SASetupDefaultHooks
 #define SBNAddShapeId gdal_SBNAddShapeId
 #define SBNCloseDiskTree gdal_SBNCloseDiskTree
 #define SBNOpenDiskTree gdal_SBNOpenDiskTree
@@ -66,6 +69,8 @@
 #define SHPDestroyTree gdal_SHPDestroyTree
 #define SHPDestroyTreeNode gdal_SHPDestroyTreeNode
 #define SHPGetInfo gdal_SHPGetInfo
+#define SHPGetLenWithoutExtension gdal_SHPGetLenWithoutExtension
+#define SHPGetPartVertexCount gdal_SHPGetPartVertexCount
 #define SHPGetSubNodeOffset gdal_SHPGetSubNodeOffset
 #define SHPOpenDiskTree gdal_SHPOpenDiskTree
 #define SHPOpen gdal_SHPOpen
@@ -75,6 +80,7 @@
 #define SHPReadObject gdal_SHPReadObject
 #define SHPReallocObjectBufIfNecessary gdal_SHPReallocObjectBufIfNecessary
 #define SHPRestoreSHX gdal_SHPRestoreSHX
+#define SHPRewindIsInnerRing gdal_SHPRewindIsInnerRing
 #define SHPRewindObject gdal_SHPRewindObject
 #define SHPSearchDiskTreeEx gdal_SHPSearchDiskTreeEx
 #define SHPSearchDiskTree gdal_SHPSearchDiskTree
@@ -97,6 +103,4 @@
 #define SHPWriteTree gdal_SHPWriteTree
 #define SHPWriteTreeLL gdal_SHPWriteTreeLL
 #define SHPWriteTreeNode gdal_SHPWriteTreeNode
-#define str_to_upper gdal_str_to_upper
 #define SwapWord gdal_SwapWord
-/* This is a generated file by dump_symbols.h. *DO NOT EDIT MANUALLY !* */
diff --git a/ogr/ogrsf_frmts/shape/shp_vsi.h b/ogr/ogrsf_frmts/shape/shp_vsi.h
index 9ee8056804e..9cbe653bead 100644
--- a/ogr/ogrsf_frmts/shape/shp_vsi.h
+++ b/ogr/ogrsf_frmts/shape/shp_vsi.h
@@ -31,6 +31,7 @@
 #ifndef SHP_VSI_H_INCLUDED
 #define SHP_VSI_H_INCLUDED
 
+#include "gdal_shapelib_symbol_rename.h"
 #include "cpl_vsi.h"
 #include "shapefil.h"
 
